jQuery(function(t){function e(){if(t(document).height()==t(window).height())return 0;let e=t("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),o=t("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-o}function o(e=!1){let o=!1,i="",d="",n="",c="";if(!1===e&&window.location.hash)i=window.location.hash.replace(/^#/,""),o=!0;else{if(!1===e||!e.type.startsWith("pointer")&&"click"!==e.type)return!1;d=t(e.target),i=d.attr("data-ocdfp-filter"),n=d.closest(".ocdfp-wrapper"),n.length?c=n.attr("id").slice(-1):(c=d.closest(".ocdfp-modal").attr("id").slice(-1),n=t("div#ocd-filter-portfolio-"+c))}if(!1!==e&&n.length&&n.hasClass("link-internal"))e.preventDefault(),"*"===i?history.replaceState(null,null,window.location.pathname):history.replaceState(null,null,"#"+i),t(".ocdfp-modal").each(function(){MicroModal.close(t(this).attr("id"))});else if(d.length&&d.is("a"))return;n.length||(n=t("body"));let l=n.find(".ocdfp-items");if(l.isotope({filter:function(){if("*"===i)return!0;let e=t(this).attr("data-categories");return e&&e.split(" ").includes(i)}}),n.find(".ocdfp-filters button, .ocdfp-categories a").removeClass("is-checked"),n.find('[data-ocdfp-filter="'+i+'"]').addClass("is-checked"),""!==c&&(l.off("arrangeComplete").on("arrangeComplete",function(){let e=t(window).scrollTop(),o=t(window).height();(n.offset().top+n.outerHeight()<e+o/3||e+o>=t(document).height())&&t("html, body").animate({scrollTop:n.offset().top-50},500)}),$modals=t('.ocdfp-modal[id$="'+c+'"]'),$modals.find(".ocdfp-categories a").removeClass("is-checked"),$modals.find('[data-ocdfp-filter="'+i+'"]').addClass("is-checked")),o&&t(".ocdfp-items").find('.ocdfp-categories a[data-ocdfp-filter="'+i+'"]').length){const e=t(".ocdfp-wrapper").first();e.length&&t("html, body").animate({scrollTop:e.offset().top-50},500)}}t(document).ready(function(){t(".ocdfp-categories, .ocdfp-tags").each(function(){let e=t(this);e.children("li").sort(function(){return Math.round(Math.random())-.5}).appendTo(e)}),t(".ocdfp-wrapper").each(function(){let e=t(this),i=e.find(".ocdfp-items");i.isotope({itemSelector:".ocdfp-item",percentPosition:!0,masonry:{columnWidth:".ocdfp-item-sizer",gutter:15}}),i.imagesLoaded().progress(function(){i.isotope("layout")}),e.find(".ocdfp-spinner").hide(),e.find(".ocdfp-filters, .ocdfp-items").css({"max-height":"none",opacity:"1",overflow:"visible"}),e.find('.ocdfp-filters [data-ocdfp-filter="*"]').addClass("is-checked"),o();const d=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&i.isotope("layout")})},{threshold:.1});d.observe(i[0])}),t("body").on("click",".ocdfp-wrapper .ocdfp-filters button, .ocdfp-wrapper .ocdfp-categories a, .ocdfp-modal .ocdfp-categories a",function(e){let i=t(e.target);if(!i.is("[data-ocdfp-filter]")){let o=i.parentsUntil(".ocdfp-wrapper").filter("[data-ocdfp-filter]").first();o.length&&(e=t.extend({},e,{target:o[0]}))}o(e)}),t(".ocdfp-wrapper .ocdfp-modal").appendTo("body"),window.ocdHtmlDocStyleAttrStr="",MicroModal.init({disableScroll:!0,onShow:function(o){window.ocdHtmlDocStyleAttrStr=t("html").attr("style")||"",t("html").css({"margin-right":e()+"px",overflow:"hidden"});let i=t(o),d=i.find(".ocdfp-detail");if(i.find(".ocdfp-detail-wrapper").outerHeight(!0)>d.outerHeight(!0)){let t=15+d.position().top+i.find(".modal-header").outerHeight(!0);d.css({position:"sticky",top:t+"px"})}let n=i.find(".ocdfp-image");if(i.find(".ocdfp-image-wrapper").outerHeight(!0)>n.outerHeight(!0)){let t=15+n.position().top+i.find(".modal-header").outerHeight(!0);n.css({position:"sticky",top:t+"px"})}let c=i.find(".modal-container");i.on("click",".ocdfp-image img",function(){window.matchMedia("(min-width: 768px)").matches&&i.toggleClass("img-expanded"),setTimeout(()=>{c[0].scrollHeight>c[0].clientHeight&&c.on("wheel",function(t){const e=t.originalEvent.deltaY,o=this,i=0===o.scrollTop,d=o.scrollHeight-o.scrollTop===o.clientHeight;e<0&&i||e>0&&d||t.stopPropagation()})},0);const t=this;setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},0)}),""===t.trim(d.html())&&(n.parent().addClass("no-description"),n.children("img").first().click())},onClose:function(e){t("html").attr("style",window.ocdHtmlDocStyleAttrStr),document.activeElement.blur();let o=t(e);o.removeClass("img-expanded"),o.off("click",".ocdfp-image img"),o.find(".ocdfp-detail").css({position:"relative",top:0}),o.find(".ocdfp-image").css({position:"relative",top:0})}})})});