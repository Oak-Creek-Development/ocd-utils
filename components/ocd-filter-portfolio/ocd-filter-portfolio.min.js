jQuery(function(t){function e(){if(t(document).height()==t(window).height())return 0;let e=t("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),o=t("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-o}function o(e){if(!e.length)return!1;const o=e.offset().top,i=t(window).scrollTop(),n=i+t(window).height();return o>=i&&o<=n}function i(e=!1){let i=!1,n="",d="",c="",l="";if(!1===e&&window.location.hash)n=window.location.hash.replace(/^#/,""),i=!0;else{if(!1===e||!e.type.startsWith("pointer")&&"click"!==e.type)return!1;d=t(e.target),n=d.attr("data-ocdfp-filter"),c=d.closest(".ocdfp-wrapper"),c.length?l=c.attr("id").slice(-1):(l=d.closest(".ocdfp-modal").attr("id").slice(-1),c=t("div#ocd-filter-portfolio-"+l))}if(!1!==e&&c.length&&c.hasClass("link-internal"))e.preventDefault(),"*"===n?history.replaceState(null,null,window.location.pathname):history.replaceState(null,null,"#"+n),t(".ocdfp-modal").each(function(){MicroModal.close(t(this).attr("id"))});else if(d.length&&d.is("a"))return;c.length||(c=t("body"));let r=c.find(".ocdfp-items");if(r.isotope({filter:function(){if("*"===n)return!0;let e=t(this).attr("data-categories");return e&&e.split(" ").includes(n)}}),c.find(".ocdfp-filters button, .ocdfp-categories a").removeClass("is-checked"),c.find('[data-ocdfp-filter="'+n+'"]').addClass("is-checked"),""!==l&&(r.off("arrangeComplete").on("arrangeComplete",function(){let e=t(window).scrollTop(),i=t(window).height();!o(c)&&(c.offset().top+c.outerHeight()<e+i/3||e+i>=t(document).height())&&t("html, body").animate({scrollTop:c.offset().top-50},500)}),$modals=t('.ocdfp-modal[id$="'+l+'"]'),$modals.find(".ocdfp-categories a").removeClass("is-checked"),$modals.find('[data-ocdfp-filter="'+n+'"]').addClass("is-checked")),i&&t(".ocdfp-items").find('.ocdfp-categories a[data-ocdfp-filter="'+n+'"]').length){const e=t(".ocdfp-wrapper").first();e.length&&t("html, body").animate({scrollTop:e.offset().top-50},500)}}t(document).ready(function(){t(".ocdfp-categories, .ocdfp-tags").each(function(){let e=t(this);e.children("li").sort(function(){return Math.round(Math.random())-.5}).appendTo(e)}),t(".ocdfp-wrapper").each(function(){let e=t(this),o=e.find(".ocdfp-items");o.isotope({itemSelector:".ocdfp-item",percentPosition:!0,masonry:{columnWidth:".ocdfp-item-sizer",gutter:15}}),o.imagesLoaded().progress(function(){o.isotope("layout")}),e.find(".ocdfp-spinner").hide(),e.find(".ocdfp-filters, .ocdfp-items").css({"max-height":"none",opacity:"1",overflow:"visible"}),e.find('.ocdfp-filters [data-ocdfp-filter="*"]').addClass("is-checked"),i();const n=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&o.isotope("layout")})},{threshold:.1});n.observe(o[0])}),t("body").on("click",".ocdfp-wrapper .ocdfp-filters button, .ocdfp-wrapper .ocdfp-categories a, .ocdfp-modal .ocdfp-categories a",function(e){let o=t(e.target);if(!o.is("[data-ocdfp-filter]")){let i=o.parentsUntil(".ocdfp-wrapper").filter("[data-ocdfp-filter]").first();i.length&&(e=t.extend({},e,{target:i[0]}))}i(e)}),t(".ocdfp-wrapper .ocdfp-modal").appendTo("body"),window.ocdHtmlDocStyleAttrStr="",MicroModal.init({disableScroll:!0,onShow:function(o){window.ocdHtmlDocStyleAttrStr=t("html").attr("style")||"",t("html").css({"margin-right":e()+"px",overflow:"hidden"});let i=t(o),n=i.find(".ocdfp-detail");if(i.find(".ocdfp-detail-wrapper").outerHeight(!0)>n.outerHeight(!0)){let t=15+n.position().top+i.find(".modal-header").outerHeight(!0);n.css({position:"sticky",top:t+"px"})}let d=i.find(".ocdfp-image");if(i.find(".ocdfp-image-wrapper").outerHeight(!0)>d.outerHeight(!0)){let t=15+d.position().top+i.find(".modal-header").outerHeight(!0);d.css({position:"sticky",top:t+"px"})}let c=i.find(".modal-container");i.on("click",".ocdfp-image img",function(){window.matchMedia("(min-width: 768px)").matches&&i.toggleClass("img-expanded"),setTimeout(()=>{c[0].scrollHeight>c[0].clientHeight&&c.on("wheel",function(t){const e=t.originalEvent.deltaY,o=this,i=0===o.scrollTop,n=o.scrollHeight-o.scrollTop===o.clientHeight;e<0&&i||e>0&&n||t.stopPropagation()})},0);const t=this;setTimeout(()=>{t.scrollIntoView({behavior:"smooth",block:"start",inline:"nearest"})},0)}),""===t.trim(n.html())&&(d.parent().addClass("no-description"),d.children("img").first().click())},onClose:function(e){t("html").attr("style",window.ocdHtmlDocStyleAttrStr),document.activeElement.blur();let o=t(e);o.removeClass("img-expanded"),o.off("click",".ocdfp-image img"),o.find(".ocdfp-detail").css({position:"relative",top:0}),o.find(".ocdfp-image").css({position:"relative",top:0})}})})});