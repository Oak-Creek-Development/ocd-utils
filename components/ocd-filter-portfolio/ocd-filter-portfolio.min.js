jQuery(function(t){function e(){if(t(document).height()==t(window).height())return 0;let e=t("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),o=t("<div>").css({width:"100%"}).appendTo(e).outerWidth();return e.remove(),100-o}function o(e=!1){let o="",i="",d="",n="";if(!1===e&&window.location.hash)o=window.location.hash.replace(/^#/,"");else{if(!1===e||!e.type.startsWith("pointer")&&"click"!==e.type)return!1;i=t(e.target),o=i.attr("data-ocdfp-filter"),d=i.closest(".ocdfp-wrapper"),d.length?n=d.attr("id").slice(-1):(n=i.closest(".ocdfp-modal").attr("id").slice(-1),d=t("div#ocd-filter-portfolio-"+n))}if(!1!==e&&d.length&&d.hasClass("link-internal"))e.preventDefault(),"*"===o?history.replaceState(null,null,window.location.pathname):history.replaceState(null,null,"#"+o),t(".ocdfp-modal").each(function(){MicroModal.close(t(this).attr("id"))});else if(i.length&&i.is("a"))return;d.length||(d=t("body"));let c=d.find(".ocdfp-items");c.isotope({filter:function(){if("*"===o)return!0;let e=t(this).attr("data-categories");return e&&e.split(" ").includes(o)}}),d.find(".ocdfp-filters button, .ocdfp-categories a").removeClass("is-checked"),d.find('[data-ocdfp-filter="'+o+'"]').addClass("is-checked"),""!==n&&(c.off("arrangeComplete").on("arrangeComplete",function(){let e=t(window).scrollTop(),o=t(window).height();(d.offset().top+d.outerHeight()<e+o/3||e+o>=t(document).height())&&t("html, body").animate({scrollTop:d.offset().top-50},500)}),$modals=t('.ocdfp-modal[id$="'+n+'"]'),$modals.find(".ocdfp-categories a").removeClass("is-checked"),$modals.find('[data-ocdfp-filter="'+o+'"]').addClass("is-checked"))}t(document).ready(function(){t(".ocdfp-categories, .ocdfp-tags").each(function(){let e=t(this);e.children("li").sort(function(){return Math.round(Math.random())-.5}).appendTo(e)}),t(".ocdfp-wrapper").each(function(){let e=t(this),i=e.find(".ocdfp-items");i.isotope({itemSelector:".ocdfp-item",percentPosition:!0,masonry:{columnWidth:".ocdfp-item-sizer",gutter:15}}),i.imagesLoaded().progress(function(){i.isotope("layout")}),e.find(".ocdfp-spinner").hide(),e.find(".ocdfp-filters, .ocdfp-items").css({"max-height":"none",opacity:"1",overflow:"visible"}),e.find('.ocdfp-filters [data-ocdfp-filter="*"]').addClass("is-checked"),o();const d=new IntersectionObserver(t=>{t.forEach(t=>{t.isIntersecting&&i.isotope("layout")})},{threshold:.1});d.observe(i[0])}),t("body").on("click",".ocdfp-wrapper .ocdfp-filters button, .ocdfp-wrapper .ocdfp-categories a, .ocdfp-modal .ocdfp-categories a",function(e){let i=t(e.target);if(!i.is("[data-ocdfp-filter]")){let o=i.parentsUntil(".ocdfp-wrapper").filter("[data-ocdfp-filter]").first();o.length&&(e=t.extend({},e,{target:o[0]}))}o(e)}),t(".ocdfp-wrapper .ocdfp-modal").appendTo("body"),window.ocdHtmlDocStyleAttrStr="",MicroModal.init({disableScroll:!0,onShow:function(o){window.ocdHtmlDocStyleAttrStr=t("html").attr("style")||"",t("html").css({"margin-right":e()+"px",overflow:"hidden"});let i=t(o),d=i.find(".ocdfp-detail");if(i.find(".ocdfp-detail-wrapper").outerHeight(!0)>d.outerHeight(!0)){let t=15+d.position().top+i.find(".modal-header").outerHeight(!0);d.css({position:"sticky",top:t+"px"})}let n=i.find(".ocdfp-image");if(i.find(".ocdfp-image-wrapper").outerHeight(!0)>n.outerHeight(!0)){let t=15+n.position().top+i.find(".modal-header").outerHeight(!0);n.css({position:"sticky",top:t+"px"})}i.on("click",".ocdfp-image img",function(){window.matchMedia("(min-width: 768px)").matches&&i.toggleClass("img-expanded")}),""===t.trim(d.html())&&(n.parent().addClass("no-description"),n.children("img").first().click())},onClose:function(e){t("html").attr("style",window.ocdHtmlDocStyleAttrStr);let o=t(e);o.removeClass("img-expanded"),o.off("click",".ocdfp-image img"),o.find(".ocdfp-detail").css({position:"relative",top:0}),o.find(".ocdfp-image").css({position:"relative",top:0})}})})});